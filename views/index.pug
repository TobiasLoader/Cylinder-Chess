mixin shape3d(n = 8, hm = 1)
	- let ba = 2*Math.PI/n; // base angle
	- let rri = Math.cos(.5*ba);
	- let rbe = +(2*Math.sin(.5*ba)).toFixed(3);
	- let rfh = hm*Math.sqrt(2-Math.sqrt(2));
	- let nb = 2, vx = [], oa = .5*(((n - 1)%2)*ba - Math.PI);
	- for(let i = 0; i < n; i++) {
		- let ca = oa + i*ba;
		- vx.push([50*(1 + Math.cos(ca)), 50*(1 + Math.sin(ca))])
	- }
	- vx = vx.map(c => c.map(k => `${+k.toFixed(2)}%`).join(' '));
	section.scene(style=`--typ: ${typ}; --rri: ${+rri.toFixed(3)}; --rbe: ${rbe};
											 --rfh: ${rfh};  --vx: ${vx}`)
		.s3d
			- for(let x = 0; x < n; x++)
				.col(style=`--j: ${(x/n).toFixed(3)};`)
					- for(let y = 0; y < 8; y++)
						.cell(style=`--i: ${((x%2)+y)%8-3.5};`)

doctype html
head
	title Cylinder Chess
	link(rel='stylesheet' href='styles.css')
h1 Cylinder Chess
p Click start to init new game, or type in room num and join.
#startgame.postbutton Start Game
input#roomnum(placeholder='#ROOM')
#joingame.postbutton Join Game
#waitingarea(style='display:none;width:400px;height:400px;border:black 1px solid;')
	| Waiting AREA
	h2.room
	#closegame.postbutton close
#gamearea(style='display:none;width:400px;height:400px;border:black 1px solid;')
	| Game AREA
	h2.room
	h3#movemade
	h3#mytime
	h3#opponenttime(style='display:inline;')
	+shape3d(8, 1)
script(src='/socket.io/socket.io.js')
script(type='module' src='script.mjs')